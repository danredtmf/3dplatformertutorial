# 3D Платформер

> Часть пятая

## В разработке

Тема ⎯ Создание усилителя скорости

1. Внутри будет использоваться объект класса `InteractiveItem`;

> Почему? `InteractiveItem` был создан, но не было найдено применение.
>
> По правде говоря, я бы переделал класс `CollectableItem` и учёт собранных предметов, так как данный класс буквально должен был называться что-то вроде `Coin`, но точно не что-то обобщённое. Ошибка проектирования.
>
> Если так подумать, то класс `InteractiveItem` вполне годится в роли собирательного предмета, если бы у него была такая функциональность. Тогда, не пришлось бы ломать сейчас голову над этим вопросом.
>
> Мне хочется идти в сторону наименьшего сопротивления, но тогда это недоразумение останется в проекте и из-за него усиления станут собираемыми предметами "по требованию" (т.е. надо будет нажать на них, чтобы собрать)
>
> Как же поступить?
>
> Кажись, буду переписывать `CItemsCounter`, чтобы он находил все `InteractiveItem` на уровне и по определённым признакам (например, id: `coin`, type: `TRIGGER`) посчитывал их.
>
> Также, нужно дополнить `InteractiveItem`, добавив новый тип `TRIGGER` и соответствующие внутри сигналы для него.

2. Будет создан модуль для `Player`: `PlayerSpeedModule`;
3. Усиление будет изменять множитель скорости у `PlayerSpeedModule` - `speed_multiplier`, а также время действия усиления - `time_effect`;
4. Во время использования усиления, новое подобранное усиление будет заменять `speed_multiplier` и `time_effect` на свой (если есть различия), и перезапускать время действия усиления;

## План

1. Дополнение кода `InteractiveItem`;
> Добавить типы `ENTITY` и `TRIGGER` в `enum Types`, добавить соответствующие сигналы
2. Изменение кода `PlayerRayCast`;
> Учитывать `InteractiveItem` только с типом `ENTITY`
3. Развилка
> Выбор между тем, нужно ли переписывать код у `CItemsCounter`
4. Изменение кода `CItemsCounter`;
> Убрать использование `CollectableItem`, учёт `InteractiveItem` только с id `coin`, прослушка сигнала `EventBus.interactive_item_interacted` только для id `coin`
5. Изменения на уровне;
> Убрать `CollectableItem`, замена на `InteractiveItem`, при условии, что пользователь документации захотел переписывать `CItemsCounter`
6. Создание `PlayerSpeedModule`;
7. Создание `EffectSpeed`;

## Дополнение кода `InteractiveItem`

Текст

## Изменение кода `PlayerRayCast`

Текст

## Развилка

Текст

## Изменение кода `CItemsCounter`

Текст

## Изменения на уровне

Текст

## Создание `PlayerSpeedModule`

Текст

## Создание `EffectSpeed`

Текст